<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POS DZ</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู -->
<div id="loginScreen" class="loginBox">
  <h3>ุชุณุฌูู ุงูุฏุฎูู</h3>
  <select id="userSelect"></select>
  <input id="pin" type="password" placeholder="ุฑูุฒ PIN">
  <button onclick="login()">ุฏุฎูู</button>
</div>

<!-- ุงูุชุทุจูู ุงูุฑุฆูุณู -->
<div id="mainApp" style="display:none;">

  <!-- ุฑุฃุณ ุงูุชุทุจูู -->
  <header>
    <div class="header-right">
      <div style="display:flex;align-items:center;gap:10px">
        <img id="headerLogo" src="" alt="" style="height:40px;border-radius:6px;display:none">
        <div>
          <h2 id="shopName">POS DZ</h2>
          <p id="currentDate"></p>
          <p id="currentTime"></p>
        </div>
      </div>
    </div>
    <div class="header-left">
      <button id="menuBtn">โฐ</button>
      <ul id="sideMenu" class="hidden">
        <li onclick="show('sale')">๐ ูุงุฌูุฉ ุงูุจูุน</li>
        <li onclick="show('stock')">๐ฆ ุงููุฎุฒูู</li>
        <li onclick="show('customers')">๐ฅ ุงูุฒุจุงุฆู</li>
        <li onclick="show('alerts')">๐ค ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</li>
        <li onclick="show('reports')">๐ ุฅุฏุงุฑุฉ ุงูุฃุนูุงู</li>
        <li onclick="show('settings')">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</li>
        <li><button id="logoutBtn" onclick="logout()">ุฎุฑูุฌ</button></li>
      </ul>
    </div>
  </header>

  <!-- ูุงุฌูุฉ ุงูุจูุน -->
  <section id="sale" class="page active">
    <h3>ูุงุฌูุฉ ุงูุจูุน</h3>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <input id="search" placeholder="ุงุณู ุฃู ุจุงุฑููุฏ" style="flex:1">
      <button onclick="addItem()">โ ุฅุถุงูุฉ</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>ุณูุนุฉ</th>
          <th>ูููุฉ</th>
          <th>ุณุนุฑ</th>
          <th>ูุฌููุน</th>
          <th>ุฎูุงุฑุงุช</th>
        </tr>
      </thead>
      <tbody id="cart"></tbody>
    </table>
    <h3 id="total" style="text-align:center;margin:12px 0">0</h3>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
      <input id="paid" placeholder="ุงููุจูุบ ุงููุฏููุน" type="number" style="flex:1">
      <select id="custSelect" style="flex:1"></select>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <button onclick="pay()" style="flex:1;background:#10b981">โ ุชุณุฏูุฏ</button>
      <button onclick="partial()" style="flex:1;background:#f59e0b">๐ฐ ุฌุฒุฆู</button>
      <button onclick="toDebt()" style="flex:1;background:#ef4444">๐ ุฏูู</button>
    </div>
  </section>

  <!-- ุงููุฎุฒูู -->
  <section id="stock" class="page">
    <button class="backBtn" onclick="goBack()">โฌ ุงูุฑุฌูุน</button>
    <h3>ุงููุฎุฒูู</h3>
    <div class="form-grid">
      <input id="type" placeholder="ููุน ุงูุณูุนุฉ">
      <input id="brand" placeholder="ุงููุงุฑูุฉ">
      <input id="size" placeholder="ุงูุญุฌู">
      <input id="barcode" placeholder="ุจุงุฑููุฏ">
      <input id="price" placeholder="ุณุนุฑ ุงูุจูุน" type="number">
      <input id="costPrice" placeholder="ุณุนุฑ ุงูุดุฑุงุก" type="number">
      <input id="qty" placeholder="ูููุฉ" type="number">
      <input id="exp" type="date" placeholder="ุชุงุฑูุฎ ุงูุตูุงุญูุฉ">
    </div>
    <button onclick="saveItem()">๐พ ุญูุธ ุงูุณูุนุฉ</button>
    <hr style="margin:16px 0">
    <input id="stockSearch" placeholder="๐ ุจุญุซ ูู ุงููุฎุฒูู..." oninput="renderStock()" style="margin-bottom:8px">
    <ul id="stockList"></ul>
  </section>

  <!-- ุงูุฒุจุงุฆู -->
  <section id="customers" class="page">
    <button class="backBtn" onclick="goBack()">โฌ ุงูุฑุฌูุน</button>
    <h3>ุงูุฒุจุงุฆู</h3>
    <div style="display:flex;gap:8px">
      <input id="cname" placeholder="ุงุณู ุงูุฒุจูู" style="flex:1">
      <button onclick="addCustomer()">โ ุฅุถุงูุฉ</button>
    </div>
    <ul id="clist" style="margin-top:12px"></ul>
  </section>

  <!-- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู -->
  <section id="alerts" class="page">
    <button class="backBtn" onclick="goBack()">โฌ ุงูุฑุฌูุน</button>
    <h3>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h3>
    <form id="addUserInAlerts" style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px">
      <input type="text" id="alertUserName" placeholder="ุงุณู ุงููุณุชุฎุฏู" required style="flex:1">
      <input type="password" id="alertUserPin" placeholder="PIN (4 ุฃุฑูุงู)" maxlength="4" required style="flex:1">
      <select id="alertUserRole" style="flex:1">
        <option value="baker">ุจุงุฆุน</option>
        <option value="manager">ูุฏูุฑ</option>
      </select>
      <button type="submit">โ ุฅุถุงูุฉ</button>
    </form>
    <ul id="alertList"></ul>
  </section>

  <!-- ==============================
       ุฅุฏุงุฑุฉ ุงูุฃุนูุงู (ูุญุฏูุซุฉ)
  ================================ -->
  <section id="reports" class="page">
    <button class="backBtn" onclick="goBack()">โฌ ุงูุฑุฌูุน</button>
    <h3>๐ ุฅุฏุงุฑุฉ ุงูุฃุนูุงู</h3>

    <!-- ุชุจููุจุงุช ุงููุชุฑุงุช -->
    <div class="report-tabs">
      <button class="rtab active" onclick="switchReportTab('daily',this)">ุงูููู</button>
      <button class="rtab" onclick="switchReportTab('weekly',this)">ุงูุฃุณุจูุน</button>
      <button class="rtab" onclick="switchReportTab('monthly',this)">ุงูุดูุฑ</button>
      <button class="rtab" onclick="switchReportTab('yearly',this)">ุงูุณูุฉ</button>
      <button class="rtab" onclick="switchReportTab('all',this)">ุงููู</button>
    </div>

    <!-- ุจุทุงูุงุช ุงูููุฎุต -->
    <div class="report-cards">
      <div class="rcard green">
        <span class="rcard-label">ุนูููุงุช ุงูุจูุน</span>
        <span class="rcard-val" id="rSales">0</span>
      </div>
      <div class="rcard blue">
        <span class="rcard-label">ุงููุฏุงุฎูู</span>
        <span class="rcard-val" id="rRevenue">0</span>
      </div>
      <div class="rcard orange">
        <span class="rcard-label">ุชูููุฉ ุงูุดุฑุงุก</span>
        <span class="rcard-val" id="rCost">0</span>
      </div>
      <div class="rcard purple">
        <span class="rcard-label">ุตุงูู ุงูุฑุจุญ</span>
        <span class="rcard-val" id="rProfit">0</span>
      </div>
    </div>

    <!-- ูุณู ุงูุฏููู -->
    <div class="debt-section">
      <h4>๐ ุชุชุจุน ุงูุฏููู</h4>
      <div class="report-cards" style="margin-bottom:12px">
        <div class="rcard red">
          <span class="rcard-label">ุฅุฌูุงูู ุงูุฏููู</span>
          <span class="rcard-val" id="rTotalDebt">0</span>
        </div>
        <div class="rcard orange">
          <span class="rcard-label">ุนุฏุฏ ุงููุฏูููู</span>
          <span class="rcard-val" id="rDebtCount">0</span>
        </div>
      </div>
      <ul id="debtList"></ul>
    </div>

    <!-- ุณุฌู ุงูุนูููุงุช -->
    <div style="margin-top:16px">
      <h4>๐ ุณุฌู ุงูุนูููุงุช</h4>
      <ul id="salesLog"></ul>
    </div>
  </section>

  <!-- ==============================
       ุงูุฅุนุฏุงุฏุงุช (ูุญุฏูุซุฉ - 3 ุฃูุณุงู)
  ================================ -->
  <section id="settings" class="page">
    <button class="backBtn" onclick="goBack()">โฌ ุงูุฑุฌูุน</button>
    <h3>โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h3>

    <!-- ุชุจููุจุงุช ุงูุฃูุณุงู -->
    <div class="settings-tabs">
      <button class="stab active" onclick="switchSettingsTab('app',this)">๐ฅ๏ธ ุงูุจุฑูุงูุฌ</button>
      <button class="stab" onclick="switchSettingsTab('store',this)">๐ช ุงููุชุฌุฑ</button>
      <button class="stab" onclick="switchSettingsTab('print',this)">๐จ๏ธ ุงูุทุจุงุนุฉ</button>
    </div>

    <!-- ุงููุณู ุงูุฃูู: ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ -->
    <div id="settingsApp" class="settings-panel active">
      <h4>๐ฅ๏ธ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ</h4>

      <label class="set-label">ุตูุบุฉ ุงูุชุงุฑูุฎ</label>
      <select id="sDateFormat">
        <option value="DD-MM-YYYY">ููู - ุดูุฑ - ุณูุฉ</option>
        <option value="MM-DD-YYYY">ุดูุฑ - ููู - ุณูุฉ</option>
        <option value="YYYY-MM-DD">ุณูุฉ - ุดูุฑ - ููู</option>
      </select>

      <label class="set-label">ุตูุบุฉ ุงูููุช</label>
      <select id="sTimeFormat">
        <option value="24">24 ุณุงุนุฉ</option>
        <option value="12">12 ุณุงุนุฉ (AM/PM)</option>
      </select>

      <label class="set-label">ุฑูุฒ ุงูุนููุฉ</label>
      <input id="sCurrency" placeholder="ูุซุงู: ุฏุฌุ DAุ MADุ โฌ" maxlength="6">

      <label class="set-label">ูุบุฉ ุงูุจุฑูุงูุฌ</label>
      <select id="sLang">
        <option value="ar">ุงูุนุฑุจูุฉ</option>
        <option value="fr">Franรงais</option>
        <option value="en">English</option>
      </select>

      <button onclick="saveSettingsApp()" style="margin-top:12px">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุจุฑูุงูุฌ</button>
    </div>

    <!-- ุงููุณู ุงูุซุงูู: ุจูุงูุงุช ุงููุชุฌุฑ -->
    <div id="settingsStore" class="settings-panel">
      <h4>๐ช ุจูุงูุงุช ุงููุชุฌุฑ</h4>

      <label class="set-label">ุดุนุงุฑ ุงููุชุฌุฑ</label>
      <div class="logo-upload-box">
        <img id="logoPreview" src="" alt="" style="display:none;max-height:80px;border-radius:8px;margin-bottom:8px">
        <input type="file" id="logoInput" accept="image/*" onchange="previewLogo(this)" style="display:none">
        <button onclick="document.getElementById('logoInput').click()" style="background:#6366f1">๐ท ุชุญููู ุงูุดุนุงุฑ</button>
        <button onclick="removeLogo()" style="background:#ef4444;margin-right:8px">๐๏ธ ุญุฐู</button>
      </div>

      <label class="set-label">ุงุณู ุงููุชุฌุฑ</label>
      <input id="sname" placeholder="ุงุณู ุงููุญู">

      <label class="set-label">ุฑูู ุงููุงุชู</label>
      <input id="sphone" placeholder="ุงููุงุชู" type="tel">

      <label class="set-label">ุงูุนููุงู</label>
      <input id="saddr" placeholder="ุงูุนููุงู">

      <label class="set-label">ุฑุณุงูุฉ ุชุฑุญูุจ ูููุงุชูุฑุฉ</label>
      <textarea id="sWelcome" placeholder="ูุซุงู: ุดูุฑุงู ูุฒูุงุฑุชููุ ูุชููู ููู ูููุงู ุณุนูุฏุงู!" rows="3" style="width:100%;padding:10px;border-radius:6px;border:1px solid #d1d5db;resize:vertical"></textarea>

      <button onclick="saveSettingsStore()" style="margin-top:12px">๐พ ุญูุธ ุจูุงูุงุช ุงููุชุฌุฑ</button>
    </div>

    <!-- ุงููุณู ุงูุซุงูุซ: ุงูุทุจุงุนุฉ -->
    <div id="settingsPrint" class="settings-panel">
      <h4>๐จ๏ธ ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ</h4>

      <label class="set-label">ุฑูู ุงููุงุชูุฑุฉ ุงูุญุงูู (ูุงุจู ููุชุนุฏูู)</label>
      <input id="sInvoiceNum" type="number" placeholder="1" min="1">

      <label class="set-label">ุงุฎุชูุงุฑ ุงูุทุงุจุนุฉ</label>
      <select id="sPrinter">
        <option value="default">ุงูุทุงุจุนุฉ ุงูุงูุชุฑุงุถูุฉ</option>
        <option value="thermal">ุทุงุจุนุฉ ุญุฑุงุฑูุฉ (Thermal)</option>
        <option value="inkjet">ุทุงุจุนุฉ ุนุงุฏูุฉ (Inkjet/Laser)</option>
      </select>

      <label class="set-label">ููุงุณ ุงููุฑู</label>
      <select id="sPaperSize">
        <option value="58mm">58 ูู (ุญุฑุงุฑูุฉ ุตุบูุฑุฉ)</option>
        <option value="80mm">80 ูู (ุญุฑุงุฑูุฉ ูุจูุฑุฉ)</option>
        <option value="A4">A4</option>
        <option value="A5">A5</option>
      </select>

      <label class="set-label">ุนุฏุฏ ุงููุณุฎ</label>
      <input id="sCopies" type="number" min="1" max="10" placeholder="1">

      <div class="check-group">
        <label class="check-label">
          <input type="checkbox" id="sPrintLogo"> ุทุจุงุนุฉ ุดุนุงุฑ ุงููุชุฌุฑ
        </label>
        <label class="check-label">
          <input type="checkbox" id="sPrintShopName" checked> ุทุจุงุนุฉ ุงุณู ุงููุชุฌุฑ
        </label>
        <label class="check-label">
          <input type="checkbox" id="sPrintPhone" checked> ุทุจุงุนุฉ ุฑูู ุงููุงุชู
        </label>
        <label class="check-label">
          <input type="checkbox" id="sPrintWelcome" checked> ุทุจุงุนุฉ ุฑุณุงูุฉ ุงูุชุฑุญูุจ
        </label>
        <label class="check-label">
          <input type="checkbox" id="sPrintBarcode"> ุทุจุงุนุฉ ุจุงุฑููุฏ ุงูููุชุฌุงุช
        </label>
        <label class="check-label">
          <input type="checkbox" id="sPrintCustBarcode"> ุทุจุงุนุฉ ุจุงุฑููุฏ ุนูู ูุฑูุฉ ุงูุฒุจูู
        </label>
      </div>

      <button onclick="saveSettingsPrint()" style="margin-top:12px">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ</button>
    </div>
  </section>

  <!-- ููุฏุงู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู -->
  <div id="usersModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeUsersModal()">&times;</span>
      <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
      <form id="addUserForm">
        <input type="text" id="newUserName" placeholder="ุงุณู ุงููุณุชุฎุฏู" required>
        <input type="password" id="newUserPin" placeholder="PIN (4 ุฃุฑูุงู)" maxlength="4" required>
        <select id="newUserRole">
          <option value="baker">ุจุงุฆุน</option>
          <option value="manager">ูุฏูุฑ</option>
        </select>
        <button type="submit">โ ุฅุถุงูุฉ ูุณุชุฎุฏู</button>
      </form>
      <table id="usersTable">
        <thead>
          <tr><th>ุงูุงุณู</th><th>PIN</th><th>ุงูุฏูุฑ</th><th>ุฎูุงุฑุงุช</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

</div>

<script src="app.js"></script>
</body>
</html>
